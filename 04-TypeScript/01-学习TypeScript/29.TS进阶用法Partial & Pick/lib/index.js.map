{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["/**\r\n * Proxy和Reflect是vue3实现响应式的基础\r\n * \r\n * Reflec \r\n * let obj = {name:\"小李\"}         //undefine\r\n * Reflect.get(obj,'name')         //'小李'\r\n * Reflect.set(obj,'name','aaa')   //true\r\n * obj                             // {name: 'aaa'}\r\n */\r\ntype Person = {\r\n  name: string,\r\n  age: number,\r\n  text: string,\r\n}\r\n\r\nconst proxy = (object: any, key: any) => {\r\n  //Proxy 第一个参数是一个对象，第二个参数是一个操作符\r\n  return new Proxy(object, {\r\n    /**\r\n     * @param target      是穿的这个对象\r\n     * @param prop        是穿的key值\r\n     * @param receiver    跟target值一样，防止上下文错误\r\n     */\r\n    get(target, prop, receiver) {\r\n      console.log('=====================>get', prop);\r\n\r\n      return Reflect.get(target, prop, receiver)\r\n    },\r\n    /**\r\n     * @param target      是穿的这个对象\r\n     * @param prop        是穿的key值\r\n     * @param value       设置的值\r\n     * @param receiver    跟target值一样，防止上下文错误\r\n     */\r\n    set(target, prop, value, receiver) {\r\n      console.log('=====================>set', prop);\r\n\r\n      return Reflect.set(target, prop, value, receiver)\r\n    }\r\n  })\r\n}\r\n\r\n// 认证监听函数\r\n// const logAccess =(object: Person, key: \"name\" | \"age\" | \"text\") => {\r\n//   return proxy(object, key)\r\n// }\r\nconst logAccess = <T>(object: T, key: keyof T): T => {\r\n  return proxy(object, key)\r\n}\r\n\r\n\r\n// 自己尝试用keyof\r\n// function logAccess<Person, K extends keyof Person>(object: Person, key: K) {\r\n//   return proxy(object, key)\r\n// }\r\n\r\nlet man: Person = logAccess({\r\n  name: '小李',\r\n  age: 22,\r\n  text: '66666'\r\n}, 'name')\r\n\r\n// man.age = 30\r\nman.age\r\nconsole.log(man);\r\n\r\n\r\nlet man2 = logAccess({\r\n  name: \"小刘\",\r\n  id: 1,\r\n}, \"id\")\r\n\r\nman2.name\r\nconsole.log(man2);"],"names":["logAccess","object","key","Proxy","get","target","prop","receiver","console","log","Reflect","set","value","proxy","man","name","age","text","man2","id"],"mappings":"gXAeA,MA+BMA,EAAY,CAAIC,EAAWC,IA/BnB,EAACD,EAAaC,IAEnB,IAAIC,MAAMF,EAAQ,CAMvBG,IAAG,CAACC,EAAQC,EAAMC,KAChBC,QAAQC,IAAI,4BAA6BH,GAElCI,QAAQN,IAAIC,EAAQC,EAAMC,IAQnCI,IAAG,CAACN,EAAQC,EAAMM,EAAOL,KACvBC,QAAQC,IAAI,4BAA6BH,GAElCI,QAAQC,IAAIN,EAAQC,EAAMM,EAAOL,MAUrCM,CAAMZ,GASf,IAAIa,EAAcd,EAAU,CAC1Be,KAAM,KACNC,IAAK,GACLC,KAAM,UAIRH,EAAIE,IACJR,QAAQC,IAAIK,GAGZ,IAAII,EAAOlB,EAAU,CACnBe,KAAM,KACNI,GAAI,IAGND,EAAKH,KACLP,QAAQC,IAAIS"}